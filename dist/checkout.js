!function(){"use strict";const e="https://backorinoco.nitatemic.ovh/api/teddies";function t(e,t,l,a){n(e+"Li"+a,"list-group-item d-flex justify-content-between lh-sm","cartListUl"),function(e,t,n,l){let a=document.createElement("div");document.getElementById(e+"Li"+l).appendChild(a);let o=document.createElement("h6");o.innerHTML=e,o.className="my-0",a.appendChild(o);let c=document.createElement("span");c.innerHTML=t,c.className="text-muted",a.appendChild(c);let i=document.createElement("span");i.className="text-muted",i.innerHTML=n,document.getElementById(e+"Li"+l).appendChild(i)}(e,t,l,a)}function n(e,t,n){let l=document.createElement("li");l.id=e,l.className=t,document.getElementById(n).appendChild(l)}let l=JSON.parse(localStorage.getItem("cart"));!function(e,t){document.getElementById("numberOfItems").innerHTML=function(e){return null===e?0:e.length}(e)}(l),function(e,t,n){let l=document.createElement("ul");l.id="cartListUl",l.className="list-group mb-3",document.getElementById("cartList").appendChild(l)}(),async function(){let n=0;for(let a=0;a<l.length;a++){let o=l[a].id;try{let c=await fetch(e+"/"+o);if(!c.ok)throw Error("Probleme de connexion api");let i=await c.json();n+=i.price,t(i.name,l[a].color,i.price/100+"€",l.indexOf(l[a]))}catch(e){console.error("Oops, an error occurred. Please contact alexandre@nitatemic.ovh")}}return n}().then((e=>{n("totalLi","list-group-item d-flex justify-content-between","cartListUl");let t=document.createElement("span");t.innerHTML="Total (EUR)",document.getElementById("totalLi").appendChild(t);let l=document.createElement("strong");l.innerHTML=e/100+"€",document.getElementById("totalLi").appendChild(l)})),document.getElementById("btnCommander").onclick=function(t){t.preventDefault();let n=new FormData(document.querySelector("form")),a=Object.create({});a.lastName=n.get("lastName"),a.firstName=n.get("firstName"),a.email=n.get("email"),a.address=n.get("address"),a.city=n.get("city"),console.log(a);let o=JSON.stringify(a)+JSON.stringify(l);fetch(e+"/order",{method:"POST",body:o,headers:{"Content-Type":"application/json"}}).then((e=>{200===e.status&&console.log(e.status)}))}}();